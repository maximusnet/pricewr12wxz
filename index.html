<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Kaspi Test</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body style="margin: 0; padding: 0; background: #fff; font-family: sans-serif;">

<h2 style="text-align:center; margin-top:40px;">Тест кнопки Kaspi</h2>

<!-- Видимая кнопка Kaspi -->
<div class="ks-widget"
     data-template="button"
     data-merchant-sku="103521901"
     data-merchant-code="1080012"
     data-city="750000000"
     data-style="mobile"
     style="display: flex; justify-content: center; margin-top: 40px;">
</div>

<!-- Подключаем официальный скрипт -->
<script>
  (function(d, s, id) {
    if (d.getElementById(id)) return;
    var js = d.createElement(s);
    js.id = id;
    js.src = 'https://kaspi.kz/kaspibutton/widget/ks-wi_ext.js';
    var kjs = d.getElementsByTagName(s)[0];
    kjs.parentNode.insertBefore(js, kjs);
  })(document, 'script', 'KS-Widget');
</script>

<!-- Автоклик или fallback-редирект через 1.5 секунды после загрузки -->
<script>
  window.addEventListener('load', function () {
    setTimeout(function () {
      // Пытаемся найти и кликнуть кнопку виджета
      const button = document.querySelector('.ks-button') || document.querySelector('.ks-widget a');
      if (button) {
        button.click();
      } else {
        // Фоллбек: прямой редирект на страницу продавца и товара
        
      }
    }, 1500);
  });
</script>

</body>
</html>
